<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="grids.css"/>
    <link rel="stylesheet" href="style.css"/>
<!-- Modifs Sam du 16/05/23 pour agrandir le graphique ou l'ouvrir dans une autre page web -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
<!-- Fin des modifs du 16/05/23 -->
    <title>Blockly Trader</title>

    <script
            src="https://code.jquery.com/jquery-3.6.4.min.js"
            integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
            crossorigin="anonymous"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/dayjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<!-- Modifs Sam du 16/05/23 pour agrandir le graphique ou l'ouvrir dans une autre page web -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<!-- Fin des modifs du 16/05/23 -->
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <script src="https://unpkg.com/blockly/blocks_compressed.js"></script>
    <script type="application/javascript" src="app.js"></script>
    <script type="application/javascript" src="blockly.js"></script>
    <script type="application/javascript" src="tradingview.js"></script>

</head>

<body>
<header>
    <img src="logo.svg" alt="Blockly Trader Logo" id="logo"/>
</header>
<div id="main_container">
    <div id="bloc_data_settings" class="settings_bloc">
        <span>DATA SETTINGS</span>
        <div id="input_data_parameters">
            <label for="pair1" id="pair_label">Pair</label>
            <select id="pair1" onchange="afficherCrypto()">
                <option value="btc">BTC</option>
                <option value="eth">ETH</option>
            </select>
            <label for="pair2" class="hidden"></label>
            <select id="pair2" onchange="afficherDevise()">
                <option value="usdt">USDT</option>
            </select>
            <label for="interval" id="interval_label">Interval</label>
            <select id="interval">
                <option value="1h">1 hour</option>
                <option value="1m">1 minute</option>
            </select>
            <label for="start_time" id="from_label">From</label>
            <input id="start_time" type="date" min="2018-01-01"/>
            <label for="end_time" id="to_label">To</label>
            <input id="end_time" type="date" min="2018-01-01"/>
        </div>

        <button type="button" id="submit_button">Submit</button>
    </div>

    <div id="bloc_test_settings" class="settings_bloc">
        <span>TEST SETTINGS</span>
        <div id="input_test_parameters">
            <label for="starting_balance_crypto" id="starting_balance_crypto_label"></label>
            <input type="text" value="0" id="starting_balance_crypto"/>
            <label for="starting_balance_currency" id="starting_balance_currency_label">USDT Balance</label>
            <input type="text" value="1000" id="starting_balance_currency"/>
            <label for="exchange_fees" id="exchange_fees_label">Exchange Fees</label>
            <input type="text" value="0.075" id="exchange_fees"/>
        </div>
        <button type="button" id="run_test_button">Run Test</button>
    </div>

    <div id="bloc_blockly">
        <div id="blocklyDiv"></div>
    </div>

    <div id="bloc_tradingview" class="to_do_bloc"></div>

    <!-- Modifs Sam du 17/05/23 pour agrandir le graphique ou l'ouvrir dans une modale -->
    <!-- <button id="btnOuvrirGraphique" data-bs-toggle="modal" data-bs-target="#graphiqueModal">Ouvrir le graphique</button> -->
    <button id="btnOuvrirGraphique" data-bs-toggle="modal" data-bs-target="#graphiqueModal" onclick=onClickModal()>Ouvrir le graphique</button>
    <!-- Fin des modifs du 17/05/23 -->

    <!-- Modifs Sam du 17/05/23 pour agrandir le graphique ou l'ouvrir dans une odale -->
    <!-- Modale pour afficher le graphique -->
    <div class="modal fade" id="graphiqueModal" tabindex="-1" aria-labelledby="graphiqueModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="graphiqueModalLabel">Graphique</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Code HTML for displaying the graph -->
                    test
                    <div id="bloc_tradingview2" class="to_do_bloc"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>
 <!-- Fin des modifs du 17/05/23 --> 

    <div id="bloc_klines">
        <table id="klines_table">
            <thead>
            <tr>
                <th><span class="infobulle" title="Heure ou date d'ouverture d'une période de trading ou d'une session de marché pour la crypto-monnaie.">Open Time</span> </th>  
                <th><span class="infobulle"  title="Prix de la première transaction effectuée sur la crypto-monnaie pour une période donnée.">Open</span> </th>
                <th><span class="infobulle" title="Prix de la dernière transaction effectuée sur la crypto-monnaie pour une période donnée.">Close</span> </th>
                <th><span class="infobulle" title="Prix le plus bas atteint par la crypto-monnaie pendant une période donnée.">Low</span> </th>
                <th><span class="infobulle" title="Prix le plus élevé atteint par la crypto-monnaie pendant une période donnée.">High</span> </th>
                <th><span class="infobulle" title="Quantité totale d'une monnaie numérique échangée au cours d'une période donnée.">
                    Volume</span> </th>
                <th><span class="infobulle" title="Nombre total de transactions effectuées pour une paire d'actifs (par exemple BTC/USDT) sur un certain intervalle de temps donné.">Trades</span> </th>
            </tr>
            </thead>
            <tbody id="klines_body"></tbody>
        </table>
    </div>

    <div id="bloc_transactions" class="to_do_bloc">
        <table id="transactions_table">
            <thead>
            <tr>
                <th>Transactions</th>
            </tr>
            </thead>
            <tbody id="test_klines_body"></tbody>
        </table>
    </div>

    <div id="bloc_result">
        <p id="resultats"></p>
    </div>

</div>

</body>
</html>

